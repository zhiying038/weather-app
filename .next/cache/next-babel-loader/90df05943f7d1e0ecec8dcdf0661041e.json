{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Yoh Zhi Ying\\\\Desktop\\\\weather\\\\pages\\\\index.js\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport axios from \"axios\";\nimport Head from \"next/head\";\nimport WeatherInfo from \"../components/WeatherInfo\";\nimport CurrentWeather from \"../components/CurrentWeather\";\nimport \"../styles/styles.scss\";\nexport default class Index extends React.Component {\n  constructor(props) {\n    super(props);\n    this.apikey = \"f5a03edeb6ad5077d594e0da4d610424\";\n    this.apiurl = \"http://api.weatheropenmap.org/data/2.5\";\n    this.state = {\n      activeCity: \"Calgary\",\n      forecast: null\n    };\n    this.APIRequest = this.APIRequest.bind(this);\n  }\n\n  async componentDidMount() {\n    await this.APIRequest(this.state.activeCity);\n  }\n\n  async APIRequest(cityName) {\n    const forecastUrl = `${this.apiurl}/forecast?q=${cityName}&units=metric&appid=${this.apikey}`;\n    await axios.get(forecastUrl).then(res => {\n      this.retrieveData(res.data.list);\n    }).catch(error => {\n      console.log(error);\n    });\n    const weatherUrl = `${this.apiurl}/weather?q=${cityName}&units=metric&appid=${this.apikey}`;\n    axios.get(weatherUrl).then(res => {\n      const details = res.data;\n      this.setState({\n        city: details.name,\n        temperature: details.main.temp,\n        description: details.weather[0].main,\n        feels_like: details.main.feels_like,\n        humidity: details.main.humidity,\n        highestTemperature: details.main.temp_max,\n        lowestTemperature: details.main.temp_min,\n        windspeed: details.wind.speed,\n        sunrise: details.sys.sunrise,\n        sunset: details.sys.sunset\n      });\n    });\n  }\n\n  formatDate(currDateTime) {\n    const months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    let date = currDateTime.split(\" \")[0].split(\"-\");\n    return `${date[2]} ${months[date[1]]}`;\n  }\n\n  formatTime(currDateTime) {\n    return parseInt(currDateTime.split(\" \")[1].split(\":\")[0]);\n  }\n\n  retrieveData(data) {\n    let date = new Date();\n    let hours = date.getHours();\n    let timeslot = \"\";\n\n    if (hours >= 0 && hours < 3) {\n      timeslot = \"00:00:00\";\n    } else if (hours >= 3 && hours < 6) {\n      timeslot = \"03:00:00\";\n    } else if (hours >= 6 && hours < 9) {\n      timeslot = \"06:00:00\";\n    } else if (hours >= 9 && hours < 12) {\n      timeslot = \"09:00:00\";\n    } else if (hours >= 12 && hours < 15) {\n      timeslot = \"12:00:00\";\n    } else if (hours >= 15 && hours < 18) {\n      timeslot = \"15:00:00\";\n    } else if (hours >= 18 && hours < 21) {\n      timeslot = \"18:00:00\";\n    } else if (hours >= 21) {\n      timeslot = \"21:00:00\";\n    }\n\n    let jsonData = data.filter(detail => {\n      let time = detail.dt_txt.split(\" \")[1];\n\n      if (time === timeslot) {\n        return detail;\n      }\n    });\n    this.setState({\n      data: jsonData\n    });\n  }\n\n  render() {\n    let cards = \"\";\n    let id = 1;\n\n    if (this.state.forecast) {\n      cards = this.state.forecast.map(data => {\n        return __jsx(WeatherInfo, {\n          key: id++,\n          time: this.formatTime(data.dt_txt),\n          date: this.formatDate(data.dt_txt),\n          highTemp: data.main.temp_max,\n          lowTemp: data.main.temp_min,\n          humidity: data.main.humidity,\n          weather: data.weather[0].description,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        });\n      });\n    }\n\n    return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, __jsx(Head, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, __jsx(\"title\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"Weather Application\")), __jsx(\"div\", {\n      className: \"columns\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"column\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, __jsx(\"h3\", {\n      className: \"has-text-centered has-text-black is-size-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Weather Forecast\"), __jsx(\"div\", {\n      className: \"module-card-wrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"module-card card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, cards))))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Yoh Zhi Ying/Desktop/weather/pages/index.js"],"names":["React","axios","Head","WeatherInfo","CurrentWeather","Index","Component","constructor","props","apikey","apiurl","state","activeCity","forecast","APIRequest","bind","componentDidMount","cityName","forecastUrl","get","then","res","retrieveData","data","list","catch","error","console","log","weatherUrl","details","setState","city","name","temperature","main","temp","description","weather","feels_like","humidity","highestTemperature","temp_max","lowestTemperature","temp_min","windspeed","wind","speed","sunrise","sys","sunset","formatDate","currDateTime","months","date","split","formatTime","parseInt","Date","hours","getHours","timeslot","jsonData","filter","detail","time","dt_txt","render","cards","id","map"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAO,uBAAP;AAEA,eAAe,MAAMC,KAAN,SAAoBL,KAAK,CAACM,SAA1B,CAAoC;AACjDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,MAAL,GAAc,kCAAd;AACA,SAAKC,MAAL,GAAc,wCAAd;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,UAAU,EAAE,SADD;AAEXC,MAAAA,QAAQ,EAAE;AAFC,KAAb;AAIA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACD;;AAED,QAAMC,iBAAN,GAA0B;AACxB,UAAM,KAAKF,UAAL,CAAgB,KAAKH,KAAL,CAAWC,UAA3B,CAAN;AACD;;AAED,QAAME,UAAN,CAAiBG,QAAjB,EAA2B;AACzB,UAAMC,WAAW,GAAI,GAAE,KAAKR,MAAO,eAAcO,QAAS,uBAAsB,KAAKR,MAAO,EAA5F;AACA,UAAMR,KAAK,CACRkB,GADG,CACCD,WADD,EAEHE,IAFG,CAEEC,GAAG,IAAI;AACX,WAAKC,YAAL,CAAkBD,GAAG,CAACE,IAAJ,CAASC,IAA3B;AACD,KAJG,EAKHC,KALG,CAKGC,KAAK,IAAI;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,KAPG,CAAN;AASA,UAAMG,UAAU,GAAI,GAAE,KAAKnB,MAAO,cAAaO,QAAS,uBAAsB,KAAKR,MAAO,EAA1F;AACAR,IAAAA,KAAK,CAACkB,GAAN,CAAUU,UAAV,EAAsBT,IAAtB,CAA2BC,GAAG,IAAI;AAChC,YAAMS,OAAO,GAAGT,GAAG,CAACE,IAApB;AACA,WAAKQ,QAAL,CAAc;AACZC,QAAAA,IAAI,EAAEF,OAAO,CAACG,IADF;AAEZC,QAAAA,WAAW,EAAEJ,OAAO,CAACK,IAAR,CAAaC,IAFd;AAGZC,QAAAA,WAAW,EAAEP,OAAO,CAACQ,OAAR,CAAgB,CAAhB,EAAmBH,IAHpB;AAIZI,QAAAA,UAAU,EAAET,OAAO,CAACK,IAAR,CAAaI,UAJb;AAKZC,QAAAA,QAAQ,EAAEV,OAAO,CAACK,IAAR,CAAaK,QALX;AAMZC,QAAAA,kBAAkB,EAAEX,OAAO,CAACK,IAAR,CAAaO,QANrB;AAOZC,QAAAA,iBAAiB,EAAEb,OAAO,CAACK,IAAR,CAAaS,QAPpB;AAQZC,QAAAA,SAAS,EAAEf,OAAO,CAACgB,IAAR,CAAaC,KARZ;AASZC,QAAAA,OAAO,EAAElB,OAAO,CAACmB,GAAR,CAAYD,OATT;AAUZE,QAAAA,MAAM,EAAEpB,OAAO,CAACmB,GAAR,CAAYC;AAVR,OAAd;AAYD,KAdD;AAeD;;AAEDC,EAAAA,UAAU,CAACC,YAAD,EAAe;AACvB,UAAMC,MAAM,GAAG,CACb,SADa,EAEb,UAFa,EAGb,OAHa,EAIb,OAJa,EAKb,KALa,EAMb,MANa,EAOb,MAPa,EAQb,QARa,EASb,WATa,EAUb,SAVa,EAWb,UAXa,EAYb,UAZa,CAAf;AAcA,QAAIC,IAAI,GAAGF,YAAY,CAACG,KAAb,CAAmB,GAAnB,EAAwB,CAAxB,EAA2BA,KAA3B,CAAiC,GAAjC,CAAX;AACA,WAAQ,GAAED,IAAI,CAAC,CAAD,CAAI,IAAGD,MAAM,CAACC,IAAI,CAAC,CAAD,CAAL,CAAU,EAArC;AACD;;AAEDE,EAAAA,UAAU,CAACJ,YAAD,EAAe;AACvB,WAAOK,QAAQ,CAACL,YAAY,CAACG,KAAb,CAAmB,GAAnB,EAAwB,CAAxB,EAA2BA,KAA3B,CAAiC,GAAjC,EAAsC,CAAtC,CAAD,CAAf;AACD;;AAEDjC,EAAAA,YAAY,CAACC,IAAD,EAAO;AACjB,QAAI+B,IAAI,GAAG,IAAII,IAAJ,EAAX;AACA,QAAIC,KAAK,GAAGL,IAAI,CAACM,QAAL,EAAZ;AACA,QAAIC,QAAQ,GAAG,EAAf;;AACA,QAAIF,KAAK,IAAI,CAAT,IAAcA,KAAK,GAAG,CAA1B,EAA6B;AAC3BE,MAAAA,QAAQ,GAAG,UAAX;AACD,KAFD,MAEO,IAAIF,KAAK,IAAI,CAAT,IAAcA,KAAK,GAAG,CAA1B,EAA6B;AAClCE,MAAAA,QAAQ,GAAG,UAAX;AACD,KAFM,MAEA,IAAIF,KAAK,IAAI,CAAT,IAAcA,KAAK,GAAG,CAA1B,EAA6B;AAClCE,MAAAA,QAAQ,GAAG,UAAX;AACD,KAFM,MAEA,IAAIF,KAAK,IAAI,CAAT,IAAcA,KAAK,GAAG,EAA1B,EAA8B;AACnCE,MAAAA,QAAQ,GAAG,UAAX;AACD,KAFM,MAEA,IAAIF,KAAK,IAAI,EAAT,IAAeA,KAAK,GAAG,EAA3B,EAA+B;AACpCE,MAAAA,QAAQ,GAAG,UAAX;AACD,KAFM,MAEA,IAAIF,KAAK,IAAI,EAAT,IAAeA,KAAK,GAAG,EAA3B,EAA+B;AACpCE,MAAAA,QAAQ,GAAG,UAAX;AACD,KAFM,MAEA,IAAIF,KAAK,IAAI,EAAT,IAAeA,KAAK,GAAG,EAA3B,EAA+B;AACpCE,MAAAA,QAAQ,GAAG,UAAX;AACD,KAFM,MAEA,IAAIF,KAAK,IAAI,EAAb,EAAiB;AACtBE,MAAAA,QAAQ,GAAG,UAAX;AACD;;AACD,QAAIC,QAAQ,GAAGvC,IAAI,CAACwC,MAAL,CAAYC,MAAM,IAAI;AACnC,UAAIC,IAAI,GAAGD,MAAM,CAACE,MAAP,CAAcX,KAAd,CAAoB,GAApB,EAAyB,CAAzB,CAAX;;AACA,UAAIU,IAAI,KAAKJ,QAAb,EAAuB;AACrB,eAAOG,MAAP;AACD;AACF,KALc,CAAf;AAMA,SAAKjC,QAAL,CAAc;AACZR,MAAAA,IAAI,EAAEuC;AADM,KAAd;AAGD;;AAEDK,EAAAA,MAAM,GAAG;AACP,QAAIC,KAAK,GAAG,EAAZ;AACA,QAAIC,EAAE,GAAG,CAAT;;AACA,QAAI,KAAK1D,KAAL,CAAWE,QAAf,EAAyB;AACvBuD,MAAAA,KAAK,GAAG,KAAKzD,KAAL,CAAWE,QAAX,CAAoByD,GAApB,CAAwB/C,IAAI,IAAI;AACtC,eACE,MAAC,WAAD;AACE,UAAA,GAAG,EAAE8C,EAAE,EADT;AAEE,UAAA,IAAI,EAAE,KAAKb,UAAL,CAAgBjC,IAAI,CAAC2C,MAArB,CAFR;AAGE,UAAA,IAAI,EAAE,KAAKf,UAAL,CAAgB5B,IAAI,CAAC2C,MAArB,CAHR;AAIE,UAAA,QAAQ,EAAE3C,IAAI,CAACY,IAAL,CAAUO,QAJtB;AAKE,UAAA,OAAO,EAAEnB,IAAI,CAACY,IAAL,CAAUS,QALrB;AAME,UAAA,QAAQ,EAAErB,IAAI,CAACY,IAAL,CAAUK,QANtB;AAOE,UAAA,OAAO,EAAEjB,IAAI,CAACe,OAAL,CAAa,CAAb,EAAgBD,WAP3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAWD,OAZO,CAAR;AAaD;;AACD,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,CADF,EAIE;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,SAAS,EAAC,4CAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,EAIE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAuB+B,KAAvB,CADF,CADF,CAJF,CADF,CAJF,CADF;AAmBD;;AAzIgD","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport Head from \"next/head\";\r\nimport WeatherInfo from \"../components/WeatherInfo\";\r\nimport CurrentWeather from \"../components/CurrentWeather\";\r\nimport \"../styles/styles.scss\";\r\n\r\nexport default class Index extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.apikey = \"f5a03edeb6ad5077d594e0da4d610424\";\r\n    this.apiurl = \"http://api.weatheropenmap.org/data/2.5\";\r\n    this.state = {\r\n      activeCity: \"Calgary\",\r\n      forecast: null\r\n    };\r\n    this.APIRequest = this.APIRequest.bind(this);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await this.APIRequest(this.state.activeCity);\r\n  }\r\n\r\n  async APIRequest(cityName) {\r\n    const forecastUrl = `${this.apiurl}/forecast?q=${cityName}&units=metric&appid=${this.apikey}`;\r\n    await axios\r\n      .get(forecastUrl)\r\n      .then(res => {\r\n        this.retrieveData(res.data.list);\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      });\r\n\r\n    const weatherUrl = `${this.apiurl}/weather?q=${cityName}&units=metric&appid=${this.apikey}`;\r\n    axios.get(weatherUrl).then(res => {\r\n      const details = res.data;\r\n      this.setState({\r\n        city: details.name,\r\n        temperature: details.main.temp,\r\n        description: details.weather[0].main,\r\n        feels_like: details.main.feels_like,\r\n        humidity: details.main.humidity,\r\n        highestTemperature: details.main.temp_max,\r\n        lowestTemperature: details.main.temp_min,\r\n        windspeed: details.wind.speed,\r\n        sunrise: details.sys.sunrise,\r\n        sunset: details.sys.sunset\r\n      });\r\n    });\r\n  }\r\n\r\n  formatDate(currDateTime) {\r\n    const months = [\r\n      \"January\",\r\n      \"February\",\r\n      \"March\",\r\n      \"April\",\r\n      \"May\",\r\n      \"June\",\r\n      \"July\",\r\n      \"August\",\r\n      \"September\",\r\n      \"October\",\r\n      \"November\",\r\n      \"December\"\r\n    ];\r\n    let date = currDateTime.split(\" \")[0].split(\"-\");\r\n    return `${date[2]} ${months[date[1]]}`;\r\n  }\r\n\r\n  formatTime(currDateTime) {\r\n    return parseInt(currDateTime.split(\" \")[1].split(\":\")[0]);\r\n  }\r\n\r\n  retrieveData(data) {\r\n    let date = new Date();\r\n    let hours = date.getHours();\r\n    let timeslot = \"\";\r\n    if (hours >= 0 && hours < 3) {\r\n      timeslot = \"00:00:00\";\r\n    } else if (hours >= 3 && hours < 6) {\r\n      timeslot = \"03:00:00\";\r\n    } else if (hours >= 6 && hours < 9) {\r\n      timeslot = \"06:00:00\";\r\n    } else if (hours >= 9 && hours < 12) {\r\n      timeslot = \"09:00:00\";\r\n    } else if (hours >= 12 && hours < 15) {\r\n      timeslot = \"12:00:00\";\r\n    } else if (hours >= 15 && hours < 18) {\r\n      timeslot = \"15:00:00\";\r\n    } else if (hours >= 18 && hours < 21) {\r\n      timeslot = \"18:00:00\";\r\n    } else if (hours >= 21) {\r\n      timeslot = \"21:00:00\";\r\n    }\r\n    let jsonData = data.filter(detail => {\r\n      let time = detail.dt_txt.split(\" \")[1];\r\n      if (time === timeslot) {\r\n        return detail;\r\n      }\r\n    });\r\n    this.setState({\r\n      data: jsonData\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let cards = \"\";\r\n    let id = 1;\r\n    if (this.state.forecast) {\r\n      cards = this.state.forecast.map(data => {\r\n        return (\r\n          <WeatherInfo\r\n            key={id++}\r\n            time={this.formatTime(data.dt_txt)}\r\n            date={this.formatDate(data.dt_txt)}\r\n            highTemp={data.main.temp_max}\r\n            lowTemp={data.main.temp_min}\r\n            humidity={data.main.humidity}\r\n            weather={data.weather[0].description}\r\n          />\r\n        );\r\n      });\r\n    }\r\n    return (\r\n      <div>\r\n        <Head>\r\n          <title>Weather Application</title>\r\n        </Head>\r\n        <div className=\"columns\">\r\n          <div className=\"column\">\r\n            <h3 className=\"has-text-centered has-text-black is-size-3\">\r\n              Weather Forecast\r\n            </h3>\r\n            <div className=\"module-card-wrap\">\r\n              <div className=\"module-card card\">\r\n                <div className=\"card\">{cards}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}